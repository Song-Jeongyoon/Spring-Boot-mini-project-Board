<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.board.mapper.BoardMapper">	<!-- xml파일을 사용할 mapper가 있는 경로 -->
  
	<!-- 게시물 목록 -->
	<!-- <select> 태그를 이용하여 select 쿼리임을 나타냄. 앞서 mapper에서 말했던 메소드의 이름은 select 쿼리의 id값과 같아야함. -->
	<select id="boardList" resultType="com.example.board.BoardDTO">	
		<![CDATA[

			SELECT
				idx, title, writer, regdate
			FROM
				board_table 
 
			ORDER BY idx DESC  

		]]>
	</select>  
  
  	<!-- 게시물 목록 + 검색 -->
	<select id="boardListSearch" parameterType="String" resultType="com.example.board.BoardDTO">	

			SELECT
				idx, title, writer, regdate
			FROM
				board_table 						
			<if test='searchType.equals("title")'>
 			 WHERE title LIKE <![CDATA['%#{keyword}%']]>
 			</if> 
 			<if test='searchType.equals("content")'>
 			 WHERE content LIKE <![CDATA['%#{keyword}%']]>
 			</if>												
 			<if test='searchType.equals("writer")'>
  				WHERE writer = <![CDATA["#{keyword, jdbcType=VARCHAR}"]]>
 			</if>
			ORDER BY idx DESC  

	</select>
	
</mapper>